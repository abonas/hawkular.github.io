
== Overview

=== Media Type

The API uses *JSON* to communicate with clients.

You _should_ add the following accept header to your requests:

----
Accept: application/json
----

When you send JSON data with a `POST` or `PUT` request, you _must_ add the following content type header:

----
Content-Type: application/json
----

=== Tenant Header

Hawkular Metrics is a multi-tenant time-series data store. Your requests to tenant-dependent resources must include
a tenant header:

----
Hawkular-Tenant: my-tenant
----

=== Timestamps

The API understands all timestamps as milliseconds since January 1, 1970, 00:00:00 UTC.



== Base Path
`/hawkular/datamining/`

== REST APIs


=== Forecaster
. link:#++PUT__metrics__metricId__forecaster++[Change forecaster configuration.]
. link:#++GET__metrics__metricId__forecaster_forecast++[Predict future values of given metric.]
. link:#++POST__metrics__metricId__forecaster_learn++[Learn model based on inserted values.]


==============================================

[[PUT__metrics__metricId__forecaster]]
*Endpoint PUT `/metrics/{metricId}/forecaster`*

NOTE: *Change forecaster configuration.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|metricId|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<Update>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Success, prediction successfully enabled|-
|400|Missing or invalid payload|<<ApiError>>
|404|Subscription of given metric not found|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__metrics__metricId__forecaster_forecast]]
*Endpoint GET `/metrics/{metricId}/forecaster/forecast`*

NOTE: *Predict future values of given metric.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|metricId|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|ahead|No|-|integer|int32|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Success, predictions returned|-
|404|Subscription of given metric not found|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__metrics__metricId__forecaster_learn]]
*Endpoint POST `/metrics/{metricId}/forecaster/learn`*

NOTE: *Learn model based on inserted values.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|metricId|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Success, learning successfully processed|-
|400|Missing or invalid payload|<<ApiError>>
|404|Subscription of given metric not found|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================


=== Info
. link:#++GET__++[Returns complete list of REST endpoints.]


==============================================

[[GET__]]
*Endpoint GET `/`*

NOTE: *Returns complete list of REST endpoints.* +




*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================


=== Subscription
. link:#++GET__metrics++[Get all subscriptions of tenant.]
. link:#++POST__metrics++[Subscribe metric for prediction.]
. link:#++DELETE__metrics__id_++[Deletes subscription of given metric.]
. link:#++PUT__metrics__id_++[Modify metric metadata.]
. link:#++GET__metrics__metricId_++[Get a concrete subscription.]


==============================================

[[GET__metrics]]
*Endpoint GET `/metrics`*

NOTE: *Get all subscriptions of tenant.* +




*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Success|-
|404|Subscription for given metric not found|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__metrics]]
*Endpoint POST `/metrics`*

NOTE: *Subscribe metric for prediction.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<RestBlueprint>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Success, prediction successfully enabled|-
|400|Missing or invalid payload|<<ApiError>>
|409|Subscription for given metric already enabled|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================




==============================================

[[DELETE__metrics__id_]]
*Endpoint DELETE `/metrics/{id}`*

NOTE: *Deletes subscription of given metric.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|204|Success, Model successfully disabled|-
|400|Missing or invalid payload|<<ApiError>>
|404|Model for given metric not found|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================




==============================================

[[PUT__metrics__id_]]
*Endpoint PUT `/metrics/{id}`*

NOTE: *Modify metric metadata.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<Update>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Success, prediction successfully enabled|-
|400|Missing or invalid payload|<<ApiError>>
|409|Subscription for given metric already enabled|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__metrics__metricId_]]
*Endpoint GET `/metrics/{metricId}`*

NOTE: *Get a concrete subscription.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|metricId|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Success|-
|404|Subscription for given metric not found|<<ApiError>>
|500|Server error|<<ApiError>>

|=======================



==============================================


== Data Types



[[ApiError]]
=== ApiError
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|errorMsg|No|-|string|-|-

|=======================


[[ConceptDriftStrategy]]
=== ConceptDriftStrategy
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values


|=======================


[[RestBlueprint]]
=== RestBlueprint
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|collectionInterval|No|-|integer|int64|-
|metricId|No|-|string|-|-

|=======================


[[Update]]
=== Update
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|conceptDriftStrategy|No|-|null|-|-
|ic|No|-|string|-|AIC, AICc, BIC
|modelToUse|No|-|string|-|SimpleExponentialSmoothing, DoubleExponentialSmoothing, TripleExponentialSmoothing
|period|No|-|integer|int32|-
|windowSize|No|-|integer|int32|-

|=======================

