
== Overview

=== Media Type

The API uses *JSON* to communicate with clients.

You _should_ add the following accept header to your requests:

----
Accept: application/json
----

When you send JSON data with a `POST` or `PUT` request, you _must_ add the following content type header:

----
Content-Type: application/json
----

=== JSON format

The server does not include null or empty entity properties in JSON representations.

[source,javascript]
----
// Metric with data
{
  "id": "paris01.web001.example.com.cpu.usage",
  "data": [
    {"timestamp": 10101010101, "value": 25.73}
  ]
}

// Metric without data
{
  "id": "paris01.web001.example.com.cpu.usage"
}
----

=== Tenant Header

Hawkular Metrics is a multi-tenant time-series data store. Your requests to tenant-dependent resources must include
a tenant header:

----
Hawkular-Tenant: my-tenant
----

=== Timestamps

The API understands all timestamps as milliseconds since January 1, 1970, 00:00:00 UTC.

=== Response codes

Resources in the API follow response codes conventions, listed below.

.Response codes conventions
[cols="30,70a", options="header"]
|===
|Response code |Meaning

|200 Ok
|The operation completed successfully.

|201 Created
|A `POST` or `PUT` operation to create an entity completed successfully.
The reponse should contain a `Location` header.

|204 No Content
|The operation completed successfully but result entity is null (`object`) or empty (`array`).
Empty arrays are not sent in the response body.

|400 Bad Request
|The operation could not be processed. It could be due to:

* Missing or malformed request entity
* Missing header/query parameter
* Malformed path/header/query parameter
* Invalid parameters (breaking business rules)

|404 Not Found
|Resource denoted by the URI does not exist.

|405 Method Not Allowed
|Resource denoted by the URI does not support the operation type.

|406 Not Acceptable
|Cannot reply in a format accepted by the client (specified in `Accept` request header).

|409 Conflict
|A `POST` or `PUT` operation could not be performed because it conflicts with an existing entity.

|415 Unsupported Media Type
|Invalid request entity format. For example, `text/plain` whereas `application/json` is expected.

|500 Internal Server Error
|Resource operation failed unexpectedly.

|503 Service Unavailable
|The server failed to initialize or the storage backend is not ready yet.
|===

=== Error responses

Error responses may include an <<ApiError>> entity in the body.

.Sample error entity
[source,javascript]
----
{"errorMsg":"Tenant is not specified. Use 'Hawkular-Tenant' header."}
----

=== Time ranges

Many resource operations need a time range restriction to be processed.

Such operations accept two <<_timestamps,timestamp>> query parameters:

* `start`: the beginning of the time range, inclusive
* `end`: the end of the time range, exclusive

Either or both of them can be omitted. `start` defaults to _now_ minus 8 eight hours. `end` defaults to _now_.

`end` must be strictly bigger than `start` otherwise the resource operation returns a `400 Bad Request` response.

.Sample operations with time range query parameters
[source,bash]
----
# Implicit time range
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data

# Implicit time range
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?start=10101010

# Explicit time range
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?start=10101010&end=20202020

# Implicit time range
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?end=20202020
----

=== Limit and Order

The API offers the ability to limit the number of data points returned as well specify the order of the results.
Limit and order only work with raw data; if used in conjunction with bucketed results, it will return an error.

Usage and default value details:

* default order is descending
* no limit imposed if parameter not specified
* limit of 0 or negative is equivalent to no limit
* if the user specifies limit, then the order is important because it returns data points up to limit in the specified order
* start time and end time influence the default order if actual limit is specified
 ** if only start time is specified then order is ascending
 ** if only end time is specified then order is descending
 ** if both are specified then order is descending
 ** if none are specified then order is descending
 ** order defaults are overridden if order specified
* default order is descending if limit is not specified regardless of specified time range

NOTE: please refer to `Time Ranges` section for defaults when omitting end, start, or both.

Sample operations with time range query parameters
[source,bash]
----
# Implicit time range, not limit, and descending order
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data

# Explicit limit of 10, implicit time range, implicit descending order
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?limit=10

# Explicit limit of 10, implicit time range, explicit ascending order
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?limit=10&order=ASC

# Explicit limit of 10, explicit time range, implicit descending order
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?start=10101010&end=20202020&limit=10

# Explicit limit of 10, explicit start, implicit end, implicit ascending order
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?start=20202020&limit=10

# Explicit limit of 10, explicit start, implicit end, explicit descending order
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?start=20202020&limit=10&order=DESC
----

=== Bucket parameters

The API offers the ability to retrieve statistics on gauges, counter and availability metrics.
To compute these statistics, Hawkular Metrics slices a given <<_time_ranges,time range>> into _buckets_.

The size of _buckets_ is configurable. This allows to send a query to get, for example,
monthly statistics over a year of data, or hourly statistics over a week of data.

Bucket size is configured with either the `buckets` or the `bucketDuration` query parameter, exclusively:

* `buckets` indicates the desired number of buckets over the specified timerange
* `bucketDuration` forces bucket size to the specified amount of time

`bucketDuration` is a <<_duration, duration>>-formatted string.

If both parameters are specified, the resource operation returns a `400 Bad Request` response.


.Sample operations with bucket query parameters
[source,bash]
----
# Desired number of buckets
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?start=10101010&end=20202020&buckets=10

# Desired bucket size
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?start=10101010&end=20202020&bucketDuration=1mn
----

=== Custom string formats

Some path or query parameters in the Metrics REST API use custom string formats.

==== Tags list

The parameter represents a list of tags, comma separated. A tag has the form `name:value`.
Names and values cannot contain commas or colons.

Throughout this document, this string format is identified as `tag-list`.

.Tags List format example
----
/hawkular/metrics/metrics?tags=host:web001.example.com,dc:paris01,type:system
----

==== Duration

The parameter represents an amount of time. Duration is formed of a length and a unit.

Length is a long integer (`int64`).

Allowed units are the following:

* `ms` for milliseconds
* `s` for seconds
* `mn` for minutes
* `h` for hours
* `d` for days

Throughout this document, this string format is identified as `duration`.

.Duration format example
----
/hawkular/metrics/gauges/paris01.web001.example.com.cpu.usage/data?bucketDuration=1h
----


== Base Path
`/hawkular/metrics/`

== REST APIs


=== Availability
. link:#++GET__availability++[Find tenant's metric definitions.]
. link:#++POST__availability++[Create availability metric.]
. link:#++POST__availability_data++[Deprecated. Please use /raw endpoint.]
. link:#++POST__availability_raw++[Add metric data for multiple availability metrics in a single call.]
. link:#++GET__availability_tags__tags_++[Retrieve gauge type's tag values]
. link:#++GET__availability__id_++[Retrieve single metric definition.]
. link:#++GET__availability__id__data++[Deprecated. Please use /raw or /stats endpoints.]
. link:#++POST__availability__id__data++[Deprecated. Please use /raw endpoint.]
. link:#++GET__availability__id__raw++[Retrieve availability data.]
. link:#++POST__availability__id__raw++[Add data for a single availability metric.]
. link:#++GET__availability__id__stats++[Retrieve availability data.]
. link:#++GET__availability__id__tags++[Retrieve tags associated with the metric definition.]
. link:#++PUT__availability__id__tags++[Update tags associated with the metric definition.]
. link:#++DELETE__availability__id__tags__tags_++[Delete tags associated with the metric definition.]


==============================================

[[GET__availability]]
*Endpoint GET `/availability`*

NOTE: *Find tenant's metric definitions.* +
_Does not include any metric values._



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|tags|No|List of tags filters|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully retrieved at least one metric definition.|array of <<Metric>>
|204|No metrics found.|-
|400|Invalid type parameter type.|<<ApiError>>
|500|Failed to retrieve metrics due to unexpected error.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__availability]]
*Endpoint POST `/availability`*

NOTE: *Create availability metric.* +
_Same notes as creating gauge metric apply._



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<MetricAvailabilityType>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Metric created successfully|-
|400|Missing or invalid payload|<<ApiError>>
|409|Availability metric with given id already exists|<<ApiError>>
|500|Metric creation failed due to an unexpected error|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__availability_data]]
*Endpoint POST `/availability/data`*

NOTE: *Deprecated. Please use /raw endpoint.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of availability metrics|array of <<MetricAvailabilityType>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================




==============================================

[[POST__availability_raw]]
*Endpoint POST `/availability/raw`*

NOTE: *Add metric data for multiple availability metrics in a single call.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of availability metrics|array of <<MetricAvailabilityType>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Adding data succeeded.|-
|400|Missing or invalid payload|<<ApiError>>
|500|Unexpected error happened while storing the data|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__availability_tags__tags_]]
*Endpoint GET `/availability/tags/{tags}`*

NOTE: *Retrieve gauge type's tag values* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|tags|Yes|Tag query|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Tags successfully retrieved.|object
|204|No matching tags were found|-
|500|Unexpected error occurred while fetching tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__availability__id_]]
*Endpoint GET `/availability/{id}`*

NOTE: *Retrieve single metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's definition was successfully retrieved.|<<Metric>>
|204|Query was successful, but no metrics definition is set.|-
|500|Unexpected error occurred while fetching metric's definition.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__availability__id__data]]
*Endpoint GET `/availability/{id}/data`*

NOTE: *Deprecated. Please use /raw or /stats endpoints.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|distinct|No|Set to true to return only distinct, contiguous values|boolean|-|-
|limit|No|Limit the number of data points returned|integer|int32|-
|order|No|Data point sort order, based on timestamp|string|-|ASC, DESC

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|successful operation|array of <<DataPoint>>

|=======================



==============================================




==============================================

[[POST__availability__id__data]]
*Endpoint POST `/availability/{id}/data`*

NOTE: *Deprecated. Please use /raw endpoint.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of availability datapoints|array of <<DataPointAvailabilityType>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================




==============================================

[[GET__availability__id__raw]]
*Endpoint GET `/availability/{id}/raw`*

NOTE: *Retrieve availability data.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|distinct|No|Set to true to return only distinct, contiguous values|boolean|-|-
|limit|No|Limit the number of data points returned|integer|int32|-
|order|No|Data point sort order, based on timestamp|string|-|ASC, DESC

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched availability data.|array of <<DataPoint>>
|204|No availability data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching availability data.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__availability__id__raw]]
*Endpoint POST `/availability/{id}/raw`*

NOTE: *Add data for a single availability metric.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of availability datapoints|array of <<DataPointAvailabilityType>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Adding data succeeded.|-
|400|Missing or invalid payload|<<ApiError>>
|500|Unexpected error happened while storing the data|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__availability__id__stats]]
*Endpoint GET `/availability/{id}/stats`*

NOTE: *Retrieve availability data.* +
_Based on buckets or bucketDuration query parameter, the time range between start and end will be divided in buckets of equal duration, and availability statistics will be computed for each bucket._



*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched availability data.|array of <<DataPoint>>
|204|No availability data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching availability data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__availability__id__tags]]
*Endpoint GET `/availability/{id}/tags`*

NOTE: *Retrieve tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully retrieved.|object
|204|Query was successful, but no metrics were found.|-
|500|Unexpected error occurred while fetching metric's tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[PUT__availability__id__tags]]
*Endpoint PUT `/availability/{id}/tags`*

NOTE: *Update tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|object

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully updated.|-
|500|Unexpected error occurred while updating metric's tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[DELETE__availability__id__tags__tags_]]
*Endpoint DELETE `/availability/{id}/tags/{tags}`*

NOTE: *Delete tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-
|tags|Yes|Tag list|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully deleted.|-
|400|Invalid tags|<<ApiError>>
|500|Unexpected error occurred while trying to delete metric's tags.|<<ApiError>>

|=======================



==============================================


=== Counter
. link:#++GET__counters++[Find tenant's counter metric definitions.]
. link:#++POST__counters++[Create counter metric.]
. link:#++GET__counters_data++[Deprecated. Please use /stats endpoint.]
. link:#++POST__counters_data++[Deprecated. Please use /raw endpoint.]
. link:#++GET__counters_rate++[Deprecated. Please use /rate/stats endpoint.]
. link:#++GET__counters_rate_stats++[Fetches data points from one or more metrics that are determined using either a tags filter or a list of metric names. The time range between start and end is divided into buckets of equal size (i.e., duration) using either the buckets or bucketDuration parameter. Functions are applied to the data points in each bucket to produce statistics or aggregated metrics.]
. link:#++POST__counters_raw++[Add data points for multiple counters.]
. link:#++GET__counters_stats++[Fetches data points from one or more metrics that are determined using either a tags filter or a list of metric names. The time range between start and end is divided into buckets of equal size (i.e., duration) using either the buckets or bucketDuration parameter. Functions   are applied tothe data points in each bucket to produce statistics or aggregated metrics.]
. link:#++GET__counters_tags__tags_++[Retrieve gauge type's tag values]
. link:#++GET__counters__id_++[Retrieve a counter definition.]
. link:#++GET__counters__id__data++[Deprecated. Please use /raw or /stats endpoints]
. link:#++POST__counters__id__data++[Deprecated. Please use /raw endpoint.]
. link:#++GET__counters__id__rate++[Retrieve counter rate data points.]
. link:#++GET__counters__id__rate_stats++[Retrieve stats for counter rate data points.]
. link:#++GET__counters__id__raw++[Retrieve counter data points.]
. link:#++POST__counters__id__raw++[Add data for a single counter.]
. link:#++GET__counters__id__stats++[Retrieve counter data points.]
. link:#++GET__counters__id__stats_tags__tags_++[Fetches data points and groups them into buckets based on one or more tag filters. The data points in each bucket are then transformed into aggregated (i.e., bucket) data points.]
. link:#++GET__counters__id__tags++[Retrieve tags associated with the metric definition.]
. link:#++PUT__counters__id__tags++[Update tags associated with the metric definition.]
. link:#++DELETE__counters__id__tags__tags_++[Delete tags associated with the metric definition.]


==============================================

[[GET__counters]]
*Endpoint GET `/counters`*

NOTE: *Find tenant's counter metric definitions.* +
_Does not include any metric values._



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|tags|No|List of tags filters|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully retrieved at least one metric definition.|array of <<Metric>>
|204|No metrics found.|-
|400|Invalid type parameter type.|<<ApiError>>
|500|Failed to retrieve metrics due to unexpected error.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__counters]]
*Endpoint POST `/counters`*

NOTE: *Create counter metric.* +
_This operation also causes the rate to be calculated and persisted periodically after raw count data is persisted. Clients are not required to explicitly create a metric before storing data. Doing so however allows clients to prevent naming collisions and to specify tags and data retention._



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<MetricLong>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Metric created successfully|-
|400|Missing or invalid payload|<<ApiError>>
|409|Counter metric with given id already exists|<<ApiError>>
|500|Metric creation failed due to an unexpected error|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters_data]]
*Endpoint GET `/counters/data`*

NOTE: *Deprecated. Please use /stats endpoint.* +




*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|tags|No|List of tags filters|string|tag-list|-
|metrics|No|List of metric names|array|-|-
|stacked|No|Downsample method (if true then sum of stacked individual stats; defaults to false)|boolean|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|successful operation|array of <<NumericBucketPoint>>

|=======================



==============================================




==============================================

[[POST__counters_data]]
*Endpoint POST `/counters/data`*

NOTE: *Deprecated. Please use /raw endpoint.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of metrics|array of <<MetricLong>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================




==============================================

[[GET__counters_rate]]
*Endpoint GET `/counters/rate`*

NOTE: *Deprecated. Please use /rate/stats endpoint.* +




*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|tags|No|List of tags filters|string|tag-list|-
|metrics|No|List of metric names|array|-|-
|stacked|No|Downsample method (if true then sum of stacked individual stats; defaults to false)|boolean|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|successful operation|array of <<NumericBucketPoint>>

|=======================



==============================================




==============================================

[[GET__counters_rate_stats]]
*Endpoint GET `/counters/rate/stats`*

NOTE: *Fetches data points from one or more metrics that are determined using either a tags filter or a list of metric names. The time range between start and end is divided into buckets of equal size (i.e., duration) using either the buckets or bucketDuration parameter. Functions are applied to the data points in each bucket to produce statistics or aggregated metrics.* +




*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|tags|No|List of tags filters|string|tag-list|-
|metrics|No|List of metric names|array|-|-
|stacked|No|Downsample method (if true then sum of stacked individual stats; defaults to false)|boolean|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<NumericBucketPoint>>
|204|No metric data was found.|-
|400|The tags parameter is required. Either the buckets or the bucketDuration parameter is required but not both.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__counters_raw]]
*Endpoint POST `/counters/raw`*

NOTE: *Add data points for multiple counters.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of metrics|array of <<MetricLong>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Adding data points succeeded.|-
|400|Missing or invalid payload|<<ApiError>>
|500|Unexpected error happened while storing the data points|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters_stats]]
*Endpoint GET `/counters/stats`*

NOTE: *Fetches data points from one or more metrics that are determined using either a tags filter or a list of metric names. The time range between start and end is divided into buckets of equal size (i.e., duration) using either the buckets or bucketDuration parameter. Functions   are applied tothe data points in each bucket to produce statistics or aggregated metrics.* +




*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|tags|No|List of tags filters|string|tag-list|-
|metrics|No|List of metric names|array|-|-
|stacked|No|Downsample method (if true then sum of stacked individual stats; defaults to false)|boolean|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<NumericBucketPoint>>
|204|No metric data was found.|-
|400|The tags parameter is required. Either the buckets or the bucketDuration parameter is required but not both.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters_tags__tags_]]
*Endpoint GET `/counters/tags/{tags}`*

NOTE: *Retrieve gauge type's tag values* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|tags|Yes|Tag query|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Tags successfully retrieved.|object
|204|No matching tags were found|-
|500|Unexpected error occurred while fetching tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters__id_]]
*Endpoint GET `/counters/{id}`*

NOTE: *Retrieve a counter definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's definition was successfully retrieved.|<<Metric>>
|204|Query was successful, but no metrics definition is set.|-
|500|Unexpected error occurred while fetching metric's definition.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters__id__data]]
*Endpoint GET `/counters/{id}/data`*

NOTE: *Deprecated. Please use /raw or /stats endpoints* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|fromEarliest|No|Use data from earliest received, subject to retention period|boolean|-|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|limit|No|Limit the number of data points returned|integer|int32|-
|order|No|Data point sort order, based on timestamp|string|-|ASC, DESC

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|successful operation|array of <<DataPoint>>

|=======================



==============================================




==============================================

[[POST__counters__id__data]]
*Endpoint POST `/counters/{id}/data`*

NOTE: *Deprecated. Please use /raw endpoint.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of data points containing timestamp and value|array of <<DataPointLong>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================




==============================================

[[GET__counters__id__rate]]
*Endpoint GET `/counters/{id}/rate`*

NOTE: *Retrieve counter rate data points.* +
_Bucket related parameters as well as percentiles are deprecated, please use rate/stats for bucketed results. When buckets or bucketDuration query parameter is used, the time range between start and end will be divided in buckets of equal duration, and metric statistics will be computed for each bucket. Reset events are detected and data points that immediately follow such events are filtered out prior to calculating the rates. This avoid misleading or inaccurate rates when resets occur._



*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<DataPoint>>
|204|No metric data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters__id__rate_stats]]
*Endpoint GET `/counters/{id}/rate/stats`*

NOTE: *Retrieve stats for counter rate data points.* +
_The time range between start and end will be divided in buckets of equal duration, and metric statistics will be computed for each bucket. Reset events are detected and data points that immediately follow such events are filtered out prior to calculating the rates. This avoid misleading or inaccurate rates when resets occur._



*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<DataPoint>>
|204|No metric data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters__id__raw]]
*Endpoint GET `/counters/{id}/raw`*

NOTE: *Retrieve counter data points.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|limit|No|Limit the number of data points returned|integer|int32|-
|order|No|Data point sort order, based on timestamp|string|-|ASC, DESC

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<DataPoint>>
|204|No metric data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__counters__id__raw]]
*Endpoint POST `/counters/{id}/raw`*

NOTE: *Add data for a single counter.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of data points containing timestamp and value|array of <<DataPointLong>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Adding data succeeded.|-
|400|Missing or invalid payload|<<ApiError>>
|500|Unexpected error happened while storing the data|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters__id__stats]]
*Endpoint GET `/counters/{id}/stats`*

NOTE: *Retrieve counter data points.* +
_When buckets or bucketDuration query parameter is used, the time range between start and end will be divided in buckets of equal duration, and metric statistics will be computed for each bucket._



*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|fromEarliest|No|Use data from earliest received, subject to retention period|boolean|-|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<DataPoint>>
|204|No metric data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters__id__stats_tags__tags_]]
*Endpoint GET `/counters/{id}/stats/tags/{tags}`*

NOTE: *Fetches data points and groups them into buckets based on one or more tag filters. The data points in each bucket are then transformed into aggregated (i.e., bucket) data points.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-
|tags|Yes|Tags|string|tag-list|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|percentiles|No|Percentiles to calculate|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|object
|204|No metric data was found.|-
|400|Tags are invalid|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__counters__id__tags]]
*Endpoint GET `/counters/{id}/tags`*

NOTE: *Retrieve tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully retrieved.|object
|204|Query was successful, but no metrics were found.|-
|500|Unexpected error occurred while fetching metric's tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[PUT__counters__id__tags]]
*Endpoint PUT `/counters/{id}/tags`*

NOTE: *Update tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|object

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully updated.|-
|500|Unexpected error occurred while updating metric's tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[DELETE__counters__id__tags__tags_]]
*Endpoint DELETE `/counters/{id}/tags/{tags}`*

NOTE: *Delete tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-
|tags|Yes|Tag list|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully deleted.|-
|400|Invalid tags|<<ApiError>>
|500|Unexpected error occurred while trying to delete metric's tags.|<<ApiError>>

|=======================



==============================================


=== Gauge
. link:#++GET__gauges++[Find tenant's metric definitions.]
. link:#++POST__gauges++[Create gauge metric.]
. link:#++GET__gauges_data++[Deprecated. Please use /stast endpoint.]
. link:#++POST__gauges_data++[Deprecated. Please use /raw endpoint.]
. link:#++POST__gauges_raw++[Add data for multiple gauge metrics in a single call.]
. link:#++GET__gauges_stats++[Find stats for multiple metrics.]
. link:#++GET__gauges_tags__tags_++[Retrieve gauge type's tag values]
. link:#++GET__gauges__id_++[Retrieve single metric definition.]
. link:#++GET__gauges__id__data++[Deprecated. Please use /raw or /stats endpoints.]
. link:#++POST__gauges__id__data++[Deprecated. Please use /raw endpoint.]
. link:#++GET__gauges__id__periods++[Find condition periods.]
. link:#++GET__gauges__id__raw++[Retrieve raw gauge data.]
. link:#++POST__gauges__id__raw++[Add data for a single gauge metric.]
. link:#++GET__gauges__id__stats++[Retrieve gauge data.]
. link:#++GET__gauges__id__stats_tags__tags_++[Fetches data points and groups them into buckets based on one or more tag filters. The data points in each bucket are then transformed into aggregated (i.e., bucket) data points.]
. link:#++GET__gauges__id__tags++[Retrieve tags associated with the metric definition.]
. link:#++PUT__gauges__id__tags++[Update tags associated with the metric definition.]
. link:#++DELETE__gauges__id__tags__tags_++[Delete tags associated with the metric definition.]


==============================================

[[GET__gauges]]
*Endpoint GET `/gauges`*

NOTE: *Find tenant's metric definitions.* +
_Does not include any metric values._



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|tags|No|List of tags filters|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully retrieved at least one metric definition.|array of <<Metric>>
|204|No metrics found.|-
|400|Invalid type parameter type.|<<ApiError>>
|500|Failed to retrieve metrics due to unexpected error.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__gauges]]
*Endpoint POST `/gauges`*

NOTE: *Create gauge metric.* +
_Clients are not required to explicitly create a metric before storing data. Doing so however allows clients to prevent naming collisions and to specify tags and data retention._



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<MetricDouble>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Metric created successfully|-
|400|Missing or invalid payload|<<ApiError>>
|409|Gauge metric with given id already exists|<<ApiError>>
|500|Metric creation failed due to an unexpected error|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges_data]]
*Endpoint GET `/gauges/data`*

NOTE: *Deprecated. Please use /stast endpoint.* +




*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|tags|No|List of tags filters|string|tag-list|-
|metrics|No|List of metric names|array|-|-
|stacked|No|Downsample method (if true then sum of stacked individual stats; defaults to false)|boolean|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|successful operation|array of <<NumericBucketPoint>>

|=======================



==============================================




==============================================

[[POST__gauges_data]]
*Endpoint POST `/gauges/data`*

NOTE: *Deprecated. Please use /raw endpoint.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of metrics|array of <<MetricDouble>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================




==============================================

[[POST__gauges_raw]]
*Endpoint POST `/gauges/raw`*

NOTE: *Add data for multiple gauge metrics in a single call.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of metrics|array of <<MetricDouble>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Adding data succeeded.|-
|400|Missing or invalid payload|<<ApiError>>
|500|Unexpected error happened while storing the data|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges_stats]]
*Endpoint GET `/gauges/stats`*

NOTE: *Find stats for multiple metrics.* +
_Fetches data points from one or more metrics that are determined using either a tags filter or a list of metric names. The time range between start and end is divided into buckets of equal size (i.e., duration) using either the buckets or bucketDuration parameter. Functions are applied to the data points in each bucket to produce statistics or aggregated metrics._



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|tags|No|List of tags filters|string|tag-list|-
|metrics|No|List of metric names|array|-|-
|stacked|No|Downsample method (if true then sum of stacked individual stats; defaults to false)|boolean|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<NumericBucketPoint>>
|204|No metric data was found.|-
|400|The tags parameter is required. Either the buckets or the bucketDuration parameter is required but not both.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges_tags__tags_]]
*Endpoint GET `/gauges/tags/{tags}`*

NOTE: *Retrieve gauge type's tag values* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|tags|Yes|Tag query|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Tags successfully retrieved.|object
|204|No matching tags were found|-
|500|Unexpected error occurred while fetching tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges__id_]]
*Endpoint GET `/gauges/{id}`*

NOTE: *Retrieve single metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's definition was successfully retrieved.|<<Metric>>
|204|Query was successful, but no metrics definition is set.|-
|500|Unexpected error occurred while fetching metric's definition.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges__id__data]]
*Endpoint GET `/gauges/{id}/data`*

NOTE: *Deprecated. Please use /raw or /stats endpoints.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|fromEarliest|No|Use data from earliest received, subject to retention period|boolean|-|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-
|limit|No|Limit the number of data points returned|integer|int32|-
|order|No|Data point sort order, based on timestamp|string|-|ASC, DESC

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<DataPoint>>
|204|No metric data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__gauges__id__data]]
*Endpoint POST `/gauges/{id}/data`*

NOTE: *Deprecated. Please use /raw endpoint.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of datapoints containing timestamp and value|array of <<DataPointDouble>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================




==============================================

[[GET__gauges__id__periods]]
*Endpoint GET `/gauges/{id}/periods`*

NOTE: *Find condition periods.* +
_Retrieve periods for which the condition holds true for each consecutive data point._



*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|threshold|Yes|A threshold against which values are compared|number|double|-
|op|Yes|A comparison operation to perform between values and the threshold.|string|-|ge, gte, lt, lte, eq, neq

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched periods.|array of object
|204|No data was found.|-
|400|Missing or invalid query parameters|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges__id__raw]]
*Endpoint GET `/gauges/{id}/raw`*

NOTE: *Retrieve raw gauge data.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|fromEarliest|No|Use data from earliest received, subject to retention period|boolean|-|-
|limit|No|Limit the number of data points returned|integer|int32|-
|order|No|Data point sort order, based on timestamp|string|-|ASC, DESC

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<DataPoint>>
|204|No metric data was found.|-
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__gauges__id__raw]]
*Endpoint POST `/gauges/{id}/raw`*

NOTE: *Add data for a single gauge metric.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of datapoints containing timestamp and value|array of <<DataPointDouble>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Adding data succeeded.|-
|400|Missing or invalid payload|<<ApiError>>
|500|Unexpected error happened while storing the data|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges__id__stats]]
*Endpoint GET `/gauges/{id}/stats`*

NOTE: *Retrieve gauge data.* +
_The time range between start and end will be divided in buckets of equal duration, and metric statistics will be computed for each bucket._



*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|fromEarliest|No|Use data from earliest received, subject to retention period|boolean|-|-
|buckets|No|Total number of buckets|integer|int32|-
|bucketDuration|No|Bucket duration|string|duration|-
|percentiles|No|Percentiles to calculate|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|array of <<DataPoint>>
|204|No metric data was found.|-
|400|buckets or bucketDuration parameter is invalid, or both are used.|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges__id__stats_tags__tags_]]
*Endpoint GET `/gauges/{id}/stats/tags/{tags}`*

NOTE: *Fetches data points and groups them into buckets based on one or more tag filters. The data points in each bucket are then transformed into aggregated (i.e., bucket) data points.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-
|tags|Yes|Tags|string|tag-list|-

|=======================



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|start|No|Defaults to now - 8 hours|integer|int64|-
|end|No|Defaults to now|integer|int64|-
|percentiles|No|Percentiles to calculate|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully fetched metric data.|object
|204|No metric data was found.|-
|400|Tags are invalid|<<ApiError>>
|500|Unexpected error occurred while fetching metric data.|<<ApiError>>

|=======================



==============================================




==============================================

[[GET__gauges__id__tags]]
*Endpoint GET `/gauges/{id}/tags`*

NOTE: *Retrieve tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully retrieved.|object
|204|Query was successful, but no metrics were found.|-
|500|Unexpected error occurred while fetching metric's tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[PUT__gauges__id__tags]]
*Endpoint PUT `/gauges/{id}/tags`*

NOTE: *Update tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-

|=======================



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|object

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully updated.|-
|500|Unexpected error occurred while updating metric's tags.|<<ApiError>>

|=======================



==============================================




==============================================

[[DELETE__gauges__id__tags__tags_]]
*Endpoint DELETE `/gauges/{id}/tags/{tags}`*

NOTE: *Delete tags associated with the metric definition.* +




*Path parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|id|Yes|-|string|-|-
|tags|Yes|Tag list|string|tag-list|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Metric's tags were successfully deleted.|-
|400|Invalid tags|<<ApiError>>
|500|Unexpected error occurred while trying to delete metric's tags.|<<ApiError>>

|=======================



==============================================


=== Metric
. link:#++GET__metrics++[Find tenant's metric definitions.]
. link:#++POST__metrics++[Create metric.]
. link:#++POST__metrics_data++[Deprecated. Please use /raw endpoint.]
. link:#++POST__metrics_raw++[Add data points for multiple metrics in a single call.]


==============================================

[[GET__metrics]]
*Endpoint GET `/metrics`*

NOTE: *Find tenant's metric definitions.* +
_Does not include any metric values._



*Query parameters*

[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Parameter|Required|Description|Type|Format|Allowable Values

|type|No|Queried metric type|string|-|gauge, availability, counter
|tags|No|List of tags filters|string|tag-list|-
|id|No|Regexp to match metricId, requires tags filtering|string|-|-

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Successfully retrieved at least one metric definition.|array of <<Metric>>
|204|No metrics found.|-
|400|Invalid type parameter type.|<<ApiError>>
|500|Failed to retrieve metrics due to unexpected error.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__metrics]]
*Endpoint POST `/metrics`*

NOTE: *Create metric.* +
_Clients are not required to explicitly create a metric before storing data. Doing so however allows clients to prevent naming collisions and to specify tags and data retention._



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<MetricObject>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Metric created successfully|-
|400|Missing or invalid payload|<<ApiError>>
|409|Metric with given id already exists|<<ApiError>>
|500|Metric creation failed due to an unexpected error|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__metrics_data]]
*Endpoint POST `/metrics/data`*

NOTE: *Deprecated. Please use /raw endpoint.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of metrics|<<MixedMetricsRequest>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|default|successful operation|-

|=======================



==============================================




==============================================

[[POST__metrics_raw]]
*Endpoint POST `/metrics/raw`*

NOTE: *Add data points for multiple metrics in a single call.* +




*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|List of metrics|<<MixedMetricsRequest>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Adding data points succeeded.|-
|400|Missing or invalid payload.|<<ApiError>>
|500|Unexpected error happened while storing the data|<<ApiError>>

|=======================



==============================================


=== Tenant
. link:#++GET__tenants++[Returns a list of tenants.]
. link:#++POST__tenants++[Create a new tenant.]


==============================================

[[GET__tenants]]
*Endpoint GET `/tenants`*

NOTE: *Returns a list of tenants.* +




*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|200|Returned a list of tenants successfully.|array of <<Tenant>>
|204|No tenants were found.|-
|500|Unexpected error occurred while fetching tenants.|<<ApiError>>

|=======================



==============================================




==============================================

[[POST__tenants]]
*Endpoint POST `/tenants`*

NOTE: *Create a new tenant.* +
_Clients are not required to create explicitly create a tenant before starting to store metric data. It is recommended to do so however to ensure that there are no tenant id naming collisions and to provide default data retention settings._



*Body*

[cols="^20,55,^25", options="header"]
|=======================
|Required|Description|Data Type

|Yes|-|<<Tenant>>

|=======================



*Response*

*Status codes*
[cols="^20,55,^25", options="header"]
|=======================
|Status Code|Reason|Response Model

|201|Tenant has been succesfully created.|-
|400|Missing or invalid retention properties. |<<ApiError>>
|409|Given tenant id has already been created.|<<ApiError>>
|500|An unexpected error occured while trying to create a tenant.|<<ApiError>>

|=======================



==============================================


== Data Types



[[ApiError]]
=== ApiError
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|errorMsg|Yes|Detailed error message of what happened|string|-|-

|=======================


[[DataPoint]]
=== DataPoint
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|tags|No|-|object|-|-
|timestamp|Yes|-|integer|int64|-
|value|Yes|-|object|-|-

|=======================


[[DataPointAvailabilityType]]
=== DataPointAvailabilityType
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|tags|No|-|object|-|-
|timestamp|Yes|-|integer|int64|-
|value|Yes|-|string|-|UP, DOWN, UNKNOWN

|=======================


[[DataPointDouble]]
=== DataPointDouble
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|tags|No|-|object|-|-
|timestamp|Yes|-|integer|int64|-
|value|Yes|-|number|double|-

|=======================


[[DataPointLong]]
=== DataPointLong
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|tags|No|-|object|-|-
|timestamp|Yes|-|integer|int64|-
|value|Yes|-|integer|int64|-

|=======================


[[DataPointObject]]
=== DataPointObject
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|tags|No|-|object|-|-
|timestamp|Yes|-|integer|int64|-
|value|Yes|-|object|-|-

|=======================


[[Metric]]
=== Metric
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|dataPoints|No|Metric data points|array of <<DataPointObject>>|-|-
|dataRetention|No|How long, in days, a data point of this metric stays in the system after it is stored|integer|int32|-
|id|No|-|string|-|-
|tags|No|Metric tags|object|-|-
|tenantId|No|-|string|-|-
|type|No|Metric type|string|-|gauge, availability, counter

|=======================


[[MetricAvailabilityType]]
=== MetricAvailabilityType
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|dataPoints|No|Metric data points|array of <<DataPointAvailabilityType>>|-|-
|dataRetention|No|How long, in days, a data point of this metric stays in the system after it is stored|integer|int32|-
|id|No|-|string|-|-
|tags|No|Metric tags|object|-|-
|tenantId|No|-|string|-|-
|type|No|Metric type|string|-|gauge, availability, counter

|=======================


[[MetricDouble]]
=== MetricDouble
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|dataPoints|No|Metric data points|array of <<DataPointDouble>>|-|-
|dataRetention|No|How long, in days, a data point of this metric stays in the system after it is stored|integer|int32|-
|id|No|-|string|-|-
|tags|No|Metric tags|object|-|-
|tenantId|No|-|string|-|-
|type|No|Metric type|string|-|gauge, availability, counter

|=======================


[[MetricLong]]
=== MetricLong
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|dataPoints|No|Metric data points|array of <<DataPointLong>>|-|-
|dataRetention|No|How long, in days, a data point of this metric stays in the system after it is stored|integer|int32|-
|id|No|-|string|-|-
|tags|No|Metric tags|object|-|-
|tenantId|No|-|string|-|-
|type|No|Metric type|string|-|gauge, availability, counter

|=======================


[[MetricObject]]
=== MetricObject
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|dataPoints|No|Metric data points|array of <<DataPointObject>>|-|-
|dataRetention|No|How long, in days, a data point of this metric stays in the system after it is stored|integer|int32|-
|id|No|-|string|-|-
|tags|No|Metric tags|object|-|-
|tenantId|No|-|string|-|-
|type|No|Metric type|string|-|gauge, availability, counter

|=======================


[[MixedMetricsRequest]]
=== MixedMetricsRequest
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|availabilities|No|-|array of <<MetricAvailabilityType>>|-|-
|counters|No|-|array of <<MetricLong>>|-|-
|gauges|No|-|array of <<MetricDouble>>|-|-

|=======================


[[NumericBucketPoint]]
=== NumericBucketPoint
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|avg|No|-|number|double|-
|empty|No|-|boolean|-|-
|end|No|-|integer|int64|-
|max|No|-|number|double|-
|median|No|-|number|double|-
|min|No|-|number|double|-
|percentiles|No|-|array of <<Percentile>>|-|-
|samples|No|-|integer|int32|-
|start|No|-|integer|int64|-
|sum|No|-|number|double|-

|=======================


[[Percentile]]
=== Percentile
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|quantile|No|-|number|double|-
|value|No|-|number|double|-

|=======================


[[Tenant]]
=== Tenant
[cols="15,^10,35,^15,^10,^15", options="header"]
|=======================
|Name|Required|Description|Type|Format|Allowable Values

|id|Yes|Identifier of the tenant|string|-|-
|retentions|No|Retention settings for metrics, expressed in days|object|-|-

|=======================

