<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Hawkular</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- css -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/asciidoctor.css" rel="stylesheet">
    <link href="css/base.css" rel="stylesheet">
    <link href="css/tabzilla.css" rel="stylesheet">
    <link href="css/styles.css" rel="stylesheet">
    <link href="css/prettify.css" rel="stylesheet">
    <link href="css/ekko-lightbox.min.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
    <script src="js/moment.min.js"></script>
    <script src="js/jquery-1.11.2.min.js"></script>

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="alternate" href="feed.xml" title="Hawkular Blog - RSS" type="application/rss+xml">

  </head>
  <body onload="prettyPrint()" data-spy="scroll" data-offset="80" data-target="#toc">
    <div id="wrap">
      <div class="dropup">
        <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
        <script>
            window.addEventListener('load', function() {
                 renderTabzilla("Hawkular", "https://hawkular.github.io", true );
            }, false);
        </script>
      </div>

    	<!-- Fixed navbar -->
        <nav class="navbar navbar-fixed-top" role="navigation">
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button class="navbar-toggle collapsed" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="index.html">Home</a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li><a href="index.html">Hawkular</a></li>
                <li><a href="docs/overview.html">Overview</a></li>
                <li><a href="docs/user/quick-start.html">Quick Start</a></li>
                <li class=""><a href="downloads.html">Downloads</a></li>
                <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                  Documentation
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="docs/user/user-guide.html">User Guide</a>
                  </li>
                  <li>
                    <a href="docs/user/installation-guide.html">Installation Guide</a>
                  </li>
                  <!--li>
                    <a href="docs/dev/terms.html">Used Terms</a>
                  </li-->
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">REST API</a>
                    <ul class="dropdown-menu">
                      <li class="menu-item ">
                        <a href="docs/rest/rest-alerts.html">Alerts</a>
                      </li>
                      <li class="menu-item ">
                        <a href="docs/rest/rest-btm.html">Business Transaction Management</a>
                      </li>
                      <li class="menu-item ">
                        <a href="docs/rest/rest-inventory.html">Inventory</a>
                      </li>
                      <li class="menu-item ">
                        <a href="docs/rest/rest-metrics.html">Metrics</a>
                      </li>
                    </ul>
                  </li>
                  <li class="menu-item dropdown dropdown-submenu">
                    <a href="javascript:;" onclick="return false;" class="dropdown-toggle" data-toggle="dropdown">Sub-projects</a>
                    <ul class="dropdown-menu">
                      <li class="menu-item ">
                        <a href="docs/components/alerts/index.html">Alerts</a>
                      </li>
                      <li class="menu-item ">
                        <a href="docs/components/btm/index.html">Business Transaction Management</a>
                      </li>
                      <li class="menu-item ">
                        <a href="docs/components/inventory/index.html">Inventory</a>
                      </li>
                      <li class="menu-item ">
                        <a href="docs/components/metrics/index.html">Metrics</a>
                      </li>
                    </ul>
                  </li>
                </ul>
                <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
                  Community
                  <span class="caret"></span>
                </a>
                <ul class="dropdown-menu" role="menu">
                  <li>
                    <a href="community/index.html">Home</a>
                  </li>
                  <li>
                    <a href="community/join.html">Join</a>
                  </li>
                  <li>
                    <a href="license.html">License</a>
                  </li>
                  <li>
                    <a href="docs/dev/development.html">Developer Guide</a>
                  </li>
                  <li>
                    <a href="https://travis-ci.org/hawkular">CI Builds</a>
                  </li>
                </ul></li>
                <li class=""><a href="blog.html">Blog</a></li>
              </ul>
            </div>
          </div>
        </nav>


<section class="main-banner blog-mainbanner">
    <div class="container">
        <h1>Hawkular Blog</h1>
    </div>
</section>


<div class="blog-container">
            <a href="blog/2015/10/21/hawkular-1.0.0.Alpha6-released.html"><h1>The fifth milestone of Hawkular released</h1></a>
            <p>21 October 2015, by Heiko W.Rupp</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Hawkular, the monitoring platform, is happy to announce the release of its sixth milestone 1.0.0.Alpha6.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_alert_center">Alert Center</h3>
<div class="paragraph">
<p>We have started providing the so called 'Alert Center', a place where you can see all fired alerts and alert
definitions in one place</p>
</div>
<div id="img-add-jdbc-driver" class="imageblock">
<div class="content">
<img src="/img/blog/2015/1.0.0.Alpha6_alert_center.png" alt="Alert Center">
</div>
<div class="title">Figure 1. List of definitions in Alert Center</div>
</div>
</div>
<div class="sect2">
<h3 id="_organizations">Organizations</h3>
<div class="paragraph">
<p>We have also started providing support for organizations, where a user may belong to
zero, one or more organizations. This to support multi-tenancy in Hawkular, so that
it could be run in a central installation, but with multiple separate departments only
seing their own resources</p>
</div>
<div id="img-add-jdbc-driver" class="imageblock">
<div class="content">
<img src="/img/blog/2015/1.0.0.Alpha6_orgs.png" alt="Organizations">
</div>
<div class="title">Figure 2. List of organization members</div>
</div>
</div>
<div class="sect2">
<h3 id="_creation_and_deletion_of_data_sources">Creation and deletion of Data sources</h3>
<div class="paragraph">
<p>There is also a new dialog to add a Datasource to a managed WildFly server</p>
</div>
<div id="img-add-jdbc-driver" class="imageblock">
<div class="content">
<img src="/img/blog/2015/1.0.0.Alpha6_add_ds.png" alt="Add Datasource button">
</div>
<div class="title">Figure 3. Add Datsource button and action drop-down</div>
</div>
<div class="paragraph">
<p>endif::[]1</p>
</div>
</div>
<div class="sect2">
<h3 id="_agent_installer">Agent installer</h3>
<div class="paragraph">
<p>We have now a little helper, the wildfly-agent installer, that makes it much easier to install
the agent inside a WildFly server.</p>
</div>
<div class="openblock">
<div class="title">Run the installer</div><div class="content">
<div class="literalblock">
<div class="content">
<pre>java -jar target/hawkular-wildfly-monitor-installer-0.10.1.Final-SNAPSHOT-standalone.jar \
  --module=/path/to/module.zip \
  --wildfly-home=/opt/wildfly-9.0.0.Final \
  --hawkular-server-url=http://myServer:8080</pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Hawkular Agent is then installed to Wildfly Server <code>/opt/wildfly-9.0.0.Final</code> as a module and is able to
report to Hawkular Server located at <code><a href="http://myServer:8080" class="bare">http://myServer:8080</a></code>.</p>
</div>
<div class="paragraph">
<p>We will in the future (also) support the WildFly Feature packs.</p>
</div>
</div>
<div class="sect2">
<h3 id="_release_notes">Release notes</h3>
<div class="paragraph">
<p>Full list of Jira issues fixed in this release:
<a href="/releasenotes/1.0.0.Alpha6.html">Release Notes - Hawkular - Version 1.0.0.Alpha6</a></p>
</div>
</div>
<div class="sect1">
<h2 id="_watch_the_demo_online">Watch the demo online</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Join us on
<a href="https://plus.google.com/b/100667078659222571663/events/cjid4nvg0gb4lacrqen4bgin6dk" class="bare">https://plus.google.com/b/100667078659222571663/events/cjid4nvg0gb4lacrqen4bgin6dk</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_downloads">Downloads</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can download the release here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://download.jboss.org/hawkular/hawkular/1.0.0.Alpha6/hawkular-dist-1.0.0.Alpha6.zip">Hawkular 1.0.0.Alpha6 (zip)</a></p>
</li>
<li>
<p><a href="http://download.jboss.org/hawkular/hawkular/1.0.0.Alpha6/hawkular-dist-1.0.0.Alpha6.tar.gz">Hawkular 1.0.0.Alpha6 (tar.gz)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Wildfly-Monitor module is available standalone from:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://download.jboss.org/hawkular/wildfly-monitor/0.11.1.Final/hawkular-monitor-0.11.1.Final-module.zip">WildFly monitor 0.11.1 (zip)</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Agent-installer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://download.jboss.org/hawkular/wildfly-monitor/0.11.1.Final/hawkular-wildfly-monitor-installer-0.11.1.Final.jar">Agent installer 0.11.1 (zip)</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_s_next">What&#8217;s next?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The next Alpha is planned for November 18th, and we are planning to work on the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>More work on the alert center</p>
</li>
<li>
<p>More work on the organizations</p>
</li>
<li>
<p>Finish work for JDBC Drivers and Datasources</p>
</li>
<li>
<p>Support agent download from server for installer purposes</p>
</li>
<li>
<p>Start of an 'overview' page per app server</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_btw">Btw</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are two easter-eggs in the release :-)</p>
</div>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2015/10/12/hawkular-metrics-0.8.0.Final-released.html"><h1>Hawkular Metrics 0.8.0 - Release</h1></a>
            <p>12 October 2015, by Stefan Negrea</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>I am happy to announce release 0.8.0 of Hawkular Metrics. This short schedule release is anchored by major enhancements for metrics query aggregation, updated container support, and performance and stability enhancements.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_major_changes">Major Changes</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>Counters</strong></p>
<div class="ulist">
<ul>
<li>
<p>Counter rates computations now avoid counter value resets (<a href="https://issues.jboss.org/browse/HWKMETRICS-218">HWKMETRICS-218</a>)</p>
</li>
<li>
<p>Counter rates are now aligned with the actual counter data used to calculate the rate (<a href="https://issues.jboss.org/browse/HWKMETRICS-284">HWKMETRICS-284</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Aggregate Metric Statistics</strong></p>
<div class="ulist">
<ul>
<li>
<p>Added support  for aggregate statistics based on multiple metrics</p>
</li>
<li>
<p>Gauges, counters, and counter rates are supported</p>
</li>
<li>
<p>Two methods of aggregation are currently available</p>
<div class="ulist">
<ul>
<li>
<p><strong>uniform</strong>: data from multiple metrics is bucketed as originating from a single source and then statistics are computed on the entire set</p>
</li>
<li>
<p><strong>stacked</strong>: statistics are first computed for every matching metric and then those statistics are stacked (added)</p>
</li>
<li>
<p>by default uniform statistics are enabled, stacking is enabled by <code>stacked=true</code> query parameter</p>
</li>
</ul>
</div>
</li>
<li>
<p>The end-points are  <code>/gauges/data</code> , <code>/counters/data</code>, <code>/counters/data/rate</code></p>
</li>
<li>
<p>There is support to query by either tags or metrics ids; but not both</p>
</li>
<li>
<p>Relevant JIRAs: <a href="https://issues.jboss.org/browse/HWKMETRICS-292">HWKMETRICS-292</a>, <a href="https://issues.jboss.org/browse/HWKMETRICS-263">HWKMETRICS-263</a>, <a href="https://issues.jboss.org/browse/HWKMETRICS-264">HWKMETRICS-264</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Data storage updates</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Schema changes will require rebuilding the database</strong></p>
</li>
<li>
<p>Reduced data storage footprint by limiting the size of  metric type (<a href="https://issues.jboss.org/browse/HWKMETRICS-301">HWKMETRICS-301</a>)</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Container support</strong></p>
<div class="ulist">
<ul>
<li>
<p>Secure connections are enabled between Hawkular Metrics and the Heapster sink (<a href="https://issues.jboss.org/browse/HWKMETRICS-217">HWKMETRICS-217</a>)</p>
</li>
<li>
<p>cqlsh can be access directly from within the Cassandra docker (<a href="https://issues.jboss.org/browse/HWKMETRICS-260">HWKMETRICS-260</a>)</p>
</li>
<li>
<p>Various updates to the Heapster sink to support latest Hawkular Metrics features: <a href="https://issues.jboss.org/browse/HWKMETRICS-285">HWKMETRICS-285</a>, <a href="https://issues.jboss.org/browse/HWKMETRICS-273">HWKMETRICS-273</a>, <a href="https://issues.jboss.org/browse/HWKMETRICS-276">HWKMETRICS-276</a>, <a href="https://issues.jboss.org/browse/HWKMETRICS-292">HWKMETRICS-292</a></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_release_links">Release links</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Github Release:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/hawkular/hawkular-metrics/releases/tag/0.8.0" class="bare">https://github.com/hawkular/hawkular-metrics/releases/tag/0.8.0</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>JBoss Nexus Maven artifacts:</p>
<div class="ulist">
<ul>
<li>
<p><a href="http://origin-repository.jboss.org/nexus/content/repositories/public/org/hawkular/metrics/" class="bare">http://origin-repository.jboss.org/nexus/content/repositories/public/org/hawkular/metrics/</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>Jira release tracker:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://issues.jboss.org/browse/HWKMETRICS/fixforversion/12328157" class="bare">https://issues.jboss.org/browse/HWKMETRICS/fixforversion/12328157</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hawkular_metrics_clients">Hawkular Metrics Clients</h2>
<div class="sectionbody">
<div class="paragraph">
<p>One of Hawkular Metrics' objectives is to <strong>be easy to integrate with</strong>; providing language specific clients is an important component for fulfilling this objective. Here is the current list of official clients:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ruby: <a href="https://github.com/hawkular/hawkular-client-ruby" class="bare">https://github.com/hawkular/hawkular-client-ruby</a></p>
</li>
<li>
<p>Python: <a href="https://github.com/hawkular/hawkular-client-python" class="bare">https://github.com/hawkular/hawkular-client-python</a></p>
</li>
<li>
<p>Go: <a href="https://github.com/hawkular/hawkular-client-go" class="bare">https://github.com/hawkular/hawkular-client-go</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_thanks">Thanks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A big "Thank  you" goes to John Sanda, Thomas Segismont, Mike Thompson, Matt Wringe, Michael Burman, Libor Zoubek, Jirka Kremser, and Heiko Rupp for their project  contributions.</p>
</div>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2015/10/09/graph-db-performance.html"><h1>Titan Graph DB Performance Tips</h1></a>
            <p>09 October 2015, by Lukas Krejci</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In Hawkular Inventory, we use the Tinkerpop API (version 2 for the time being)
to store our inventory model in a graph database. We chose Titan as the storage
engine configured to store the data in the Cassandra cluster that is also
backing Hawkular Metrics and Alerts. This blog post will guide you through some
performance-related lessons with Titan that we learned so far.</p>
</div>
<div class="paragraph">
<p>Inventory is under heavy development with a lot of redesign and refactoring
going on between releases so we took quite a naive approach to storing and
querying data from the graph database. That is, we store entities from our
model as vertices in the graph and the relationships between the entities as
edges in the graph. Quite simple and a school book example of how it should
look like.</p>
</div>
<div class="paragraph">
<p>We did declare a couple of indices in the database on the read-only aspects
of the vertices (i.e. a "type" of the entity the vertex corresponds to) but we
actually didn&#8217;t pay too much attention to the performance. We wanted to have
the model right first.</p>
</div>
<div class="paragraph">
<p>Fast forward a couple of months and of course, the performance started to be
a real problem. The Hawkular agent for Wildfly is inserting a non-trivial
amount of entities and not only inserting them but also querying them has seen
a huge performance degradation compared to the simple examples we were unit
testing with (due to number of vertices and edges stored).</p>
</div>
<div class="paragraph">
<p>The time has come to think about how to squeeze some performance out of Titan
as well as how to store the data and query it more intelligently.</p>
</div>
<div class="paragraph">
<p>So what we did, you ask, to gain an order of mangnitude speed up?</p>
</div>
<div class="paragraph">
<p>There are 2 aspects that needed our attention actually - insert performance,
and query performance, which is where we are an order of magnitude faster now.</p>
</div>
<div class="paragraph">
<p>I will focus only on the query performance in this post.</p>
</div>
<div class="paragraph">
<p>As a model example, let&#8217;s consider the following query: find me all resources
in a certain feed that have a certain resource type.</p>
</div>
<div class="paragraph">
<p>For illustration purposes, this will be a fabricated graph that we will be
querying.</p>
</div>
<div class="imageblock" style="text-align: center">
<div class="content">
<img src="/img/blog/2015/2015-10-09-inv-structure.png" alt="Example Inventory">
</div>
</div>
<div class="paragraph">
<p>In <a href="https://github.com/tinkerpop/gremlin/wiki">Gremlin</a> query language, our
example query would be expressed without any optimizations, that we will going
to describe later in the post, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">g.V() <b class="conum">(1)</b>
  .has("name", "Red Hat, Inc.")
  .has("type", "tenant") <b class="conum">(2)</b>
  .out("contains") <b class="conum">(3)</b>
  .has("name", "staging")
  .has("type", "environment") <b class="conum">(4)</b>
  .out("contains") <b class="conum">(5)</b>
  .has("name", "test.redhat.com")
  .has("type", "feed") <b class="conum">(6)</b>
  .out("contains") <b class="conum">(7)</b>
  .has("type", "resource") <b class="conum">(8)</b>
  .as("result") <b class="conum">(9)</b>
    .in("defines") <b class="conum">(10)</b>
    .has("type", "resourceType")
    .has("name", "JBoss EAP") <b class="conum">(11)</b>
  .back("result"); <b class="conum">(12)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>For all vertices in the graph</p>
</li>
<li>
<p>Choose those that have the type "tenant" called "Red Hat, Inc."</p>
</li>
<li>
<p>Go out from them following the "contains" edges, to the target vertices</p>
</li>
<li>
<p>choose those that have the type "environment" and name "staging"</p>
</li>
<li>
<p>out, following "contains" edges</p>
</li>
<li>
<p>choose vertices with type "feed" and name "test.redhat.com"</p>
</li>
<li>
<p>out, following "contains" edges</p>
</li>
<li>
<p>choose vertices with type "resource"</p>
</li>
<li>
<p>mark the position in the traversal as a "result"</p>
</li>
<li>
<p>follow "defines" edges that point to the "result" vertices</p>
</li>
<li>
<p>choose all the source vertices of the edges that have type "Resource Type"
and name "JBoss EAP"</p>
</li>
<li>
<p>if the above yields a vertex, go back to the "result" and use that instead</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>So out of that pipeline, as they call it, out come the vertices representing
resources with the desired resource type that live under given feed. E.g. in
the example above, the query will return <code>eap1-test.redhat.com</code> and
<code>eap2-test.redhat.com</code>.</p>
</div>
<div class="paragraph">
<p>So what&#8217;s wrong with that you ask?</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reduce_number_of_hops">1. Reduce number of Hops</h3>
<div class="paragraph">
<p>In the graph visualization you can notice that there is a <code>contains</code> edge
between a number of vertices. Semantically, in Hawkular Inventory vertices
connected by these edges form a tree and thus each of the vertices can be
uniquely identified by its path along the <code>contains</code> edges. We call this
path a canonical path and we use this path in a number of ways in the API.</p>
</div>
<div class="paragraph">
<p>Additionally, this path is stored on each vertex (and indexed by a unique
index to ensure consistency of the data). Having the path stored on each
vertex and having an index on it enables us to be "clever" with the query
and rewrite the parts that follow the <code>contains</code> chain from the Tenant
vertices down by a simple lookup of the canonical path.</p>
</div>
<div class="paragraph">
<p>As such, the original query would be transformed into:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">g.V()
  .has("path", "Red Hat, Inc./staging/test.redhat.com")
  .out("contains")
  .has("type", "resource")
  .as("result")
    .in("defines")
    .has("type", "resourceType")
    .has("name", "JBoss EAP")
  .back("result");</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is a lot faster than the original, because we use an index to find our
starting point much "deeper" in the graph than previously and have to make
less hops to get to our results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_avoid_code_as_back_code_if_possible">2. Avoid <code>.as()&#8230;&#8203;back()</code> If Possible</h3>
<div class="paragraph">
<p>This is not shown in the example but we found that we used the <code>.as()&#8230;&#8203;back()</code>
construct in more places than necessary. Avoiding it speeds the execution up.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mirror_properties_on_the_edges">3. Mirror Properties on The Edges</h3>
<div class="paragraph">
<p>This is the single most important optimization we&#8217;ve done so far. The rationale
is this. To jump from a vertex to another vertex over an edge is a fairly
expensive operation. Titan uses the adjacency lists to store the vertices and
their edges in wide rows in Cassandra. It uses another adjacency list for edges
and their target vertices.</p>
</div>
<div class="paragraph">
<p>So to go from vertex to vertex, Titan actually has to do 2 queries. It would
be much easier if we could avoid that at least in some cases.</p>
</div>
<div class="paragraph">
<p>The solution here is to copy the values of some (frequently used and, in our
case, immutable) properties from the "source" and "target" vertices directly
to the edges. This helps especially in the cases where you do some kind of
filtering on the target vertices that you instead can do directly on the edges.
If there is a high number of edges to go through, this helps tremendously
because you greatly reduce the number of times you have to do the "second hop"
to the target vertex.</p>
</div>
<div class="paragraph">
<p>So this is the final version of the query that is an order of magnitude faster
than the original:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-java" data-lang="java">g.V()
  .has("path", "Red Hat, Inc./staging/test.redhat.com")
  .outE("contains") <b class="conum">(1)</b>
  .has("targetType", "resource") <b class="conum">(2)</b>
  .inV() <b class="conum">(3)</b>
  .as("result")
    .inE("defines") <b class="conum">(4)</b>
    .has("sourceType", "resourceType")
    .has("sourceName", "JBoss EAP")
  .back("result");</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p><code>.out(label)</code> goes to the target vertex, while <code>.outE(label)</code> goes only to
the edge</p>
</li>
<li>
<p>We&#8217;re now on the edge and are filtering on its properties</p>
</li>
<li>
<p>And we&#8217;re jumping on the target vertex</p>
</li>
<li>
<p>Again, only jumping on the edge and filtering only on its properties.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While I am sure there are still some optimizations left that we could do to
make this even faster, I am quite satisfied with the speed up we were able to
achieve just by these changes.</p>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2015/10/06/hawkular-btm-0-4-0-released.html"><h1>Hawkular-BTM 0.4.0 released</h1></a>
            <p>06 October 2015, by Gary Brown</p>
            <p><div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>I am happy to announce release 0.4.0.Final of the Hawkular Business Transaction Management project. The main focus for this release has been starting work on the server side capabilities and the introduction of an initial UI. A demo of the new functionality can be found <a href="https://youtu.be/vCIgC3QuJTI">here</a>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/blog/2015/2015-10-06-btm-kibana.png" alt="Kibana dashboard">
</div>
<div class="title">Figure 1. Kibana dashboard showing response time information</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_highlights_of_this_release">Highlights of this release</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Deriving Response Time metrics from the Business Transaction Fragments</p>
</li>
<li>
<p>Storing the Business Transaction Fragments, and derived Response Time metrics, in Elasticsearch</p>
</li>
<li>
<p>Creating of an initial UI based around Kibana to display the Response Time metric information</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Download the release from <a href="https://github.com/hawkular/hawkular-btm/releases/tag/0.4.0.Final">here</a>.</p>
</div>
<div class="paragraph">
<p>The detailed release notes can be found <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12316120&amp;version=12328248">here</a>.</p>
</div>
<div class="paragraph">
<p>Feature requests and bugs should be reported in our project <a href="https://issues.jboss.org/browse/HWKBTM">jira</a>.</p>
</div>
</div>
</div></p>
            <br />
            <hr /><br />
            <br />
            <a href="blog/2015/10/05/hawkular-metrics-2k-commits.html"><h1>Hawkular Metrics - 2k Commits</h1></a>
            <p>05 October 2015, by Stefan Negrea</p>
            <p><div class="paragraph">
<p>The Hawkular Metrics project reached a nice milestone last week. On Tuesday a pull-request merge commit marked the <a href="https://github.com/hawkular/hawkular-metrics/commit/1e04c5219b4eee6da0eab2714e7196a3dc45f0e1">2000th</a> commit on the master branch of the project.</p>
</div>
<div class="paragraph">
<p>Here are few other interesting data points about the project:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>over 25k lines of code (~87% Java)</p>
</li>
<li>
<p><a href="https://github.com/hawkular/hawkular-metrics/commits/master">over 2k commits</a>, <a href="https://github.com/hawkular/hawkular-metrics/pulls?q=is%3Aall">over 385 pull requests</a></p>
</li>
<li>
<p><a href="https://github.com/hawkular/hawkular-metrics/releases">17 releases</a> (with a monthly release cadence)</p>
</li>
<li>
<p><a href="https://github.com/hawkular/hawkular-metrics/commit/d725243544e1d692610cf56b7fe0ffdaff3487f8">19 months since first repository commit</a></p>
</li>
<li>
<p><a href="https://github.com/hawkular/hawkular-metrics">24 contributors, 35 forks, and 54 stars in Github</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For those not familiar with <a href="https://github.com/hawkular/hawkular-metrics/blob/master/README.adoc">Hawkular Metrics</a>, the project is a high performance storage engine for large volume metric data. The project uses Cassandra as a storage engine because of its flexible data model well suited for time-series data storage and linear scalability with no single point of failure.</p>
</div>
<div class="paragraph">
<p>Hawkular Metrics offers powerful querying, aggregation, and tagging features for gauge, availability, and counter metrics. The data storage was designed with multi-tenancy as a core feature, which is supported out-of-box. The main public API for the project is a clean REST interface.</p>
</div>
<div class="paragraph">
<p>These <a href="https://github.com/hawkular/hawkular-metrics/commits/1e04c5219b4eee6da0eab2714e7196a3dc45f0e1">first 2000 commits</a> are just the beginning of great things to come in a relatively young project. There are plans to add additional metric types and more complex statistical and querying capabilities. Ingestion data aggregation, cross metric down-sampling, and rich tagging queries over tag data are just a few of the features we have planned. So far we have been very careful introducing features in order to keep a API clean and deliver robust software.</p>
</div>
<div class="paragraph">
<p>We welcome all contributions and input. If you or your organization is looking for a metric storage engine, we would love to talk with you. We want to learn about your use case, how you approach metric storage, and if there features are missing in Hawkular Metrics for your particular application.  A good resource for future plans as well as past releases is the <a href="https://issues.jboss.org/projects/HWKMETRICS?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page&amp;status=all">Hawkular Metrics JIRA</a>. Feel free to contact us overy irc (#hawkular on freenode), <a href="https://lists.jboss.org/mailman/listinfo/hawkular-dev">mailing list</a>, or email.</p>
</div>
<div class="paragraph">
<p>As a closing, I want to send a big “Thank You” to the <a href="http://www.hawkular.org/">Hawkular organization</a> for hosting the project and to all the project committers for their outstanding contributions:  <a href="https://github.com/tsegismont">Thomas Segismont</a>, <a href="https://github.com/stefannegrea">Stefan Negrea</a>, <a href="https://github.com/jsanda">John Sanda</a>, <a href="https://github.com/mtho11">Mike Thompson</a>, <a href="https://github.com/pilhuhn">Heiko Rupp</a>, <a href="https://github.com/burmanm">Micheal Burman</a>, <a href="https://github.com/mwringe">Matt Wringe</a>, <a href="https://github.com/ppalaga">Peter Palaga</a>, <a href="https://github.com/jkandasa">Jeeva Kandasamy</a>, <a href="https://github.com/heiko-braun">Heiko Braun</a>, <a href="https://github.com/Jiri-Kremser">Jirka Kremser</a>, <a href="https://github.com/vnugent">Viet Nguyen</a>, <a href="https://github.com/jimmidyson">Jimmi Dyson</a>, <a href="https://github.com/aslakknutsen">Aslak Knutsen</a>, <a href="https://github.com/jpkrohling">Juraci Paixão Kröhling</a>, <a href="https://github.com/theute">Thomas Heute</a>, <a href="https://github.com/jshaughn">Jay Shaughnessy</a>, <a href="https://github.com/metlos">Lukas Krejci</a>, <a href="https://github.com/jstrachan">James Strachan</a>, <a href="https://github.com/gkhachik">Garik Khachikyan</a>, <a href="https://github.com/spadgett">Sam Padgett</a>, <a href="https://github.com/vrockai">Villiam Rockai</a>, <a href="https://github.com/jmazzitelli">John Mazzitelli</a>, <a href="https://github.com/ammendonca">Alexandre Mendonça</a>.</p>
</div>
<div class="paragraph">
<p>To 4000 commits in half the time!</p>
</div></p>
            <br />
            <hr /><br />
            <br />



    <div class="large-4 columns blog-post-listings">
        <h2>Older posts:</h2>
        <ul>
          <li>30 September 2015 - <a href="blog/2015/09/30/hawkular-metrics-0.7.0.Final-released.html">Hawkular-Metrics 0.7.0 Release</a></li>
          <li>23 September 2015 - <a href="blog/2015/09/23/hawkular-1.0.0.Alpha5-released.html">The fifth milestone of Hawkular released</a></li>
          <li>03 September 2015 - <a href="blog/2015/09/03/monitoring-rails-using-hawkular-metrics.html">Monitoring Rails App using Hawkular Metrics</a></li>
          <li>29 August 2015 - <a href="blog/2015/08/29/hawkular-metrics-0.6.0.Final-released.html">Hawkular-Metrics 0.6.0 Release</a></li>
          <li>27 August 2015 - <a href="blog/2015/08/27/hawkular-1.0.0.Alpha4-released.html">The fourth milestone of Hawkular released</a></li>
          <li>25 August 2015 - <a href="blog/2015/08/25/hawkular-alerts-autoresolve.html">Introduction to AutoResolve triggers</a></li>
          <li>19 August 2015 - <a href="blog/2015/08/19/hawkular-alerts-standalone.html">Using Hawkular Alerts as a standalone engine</a></li>
          <li>14 August 2015 - <a href="blog/2015/08/14/hawkular-btm-0.3.0-demo.html">Visualising Business Transaction Information using Hawkular BTM 0.3.0.Final with RTGov Integration</a></li>
          <li>30 July 2015 - <a href="blog/2015/07/30/hawkular-1.0.0.Alpha3-released.html">Hawkular, all good things make three!</a></li>
          <li>22 July 2015 - <a href="blog/2015/07/22/hawkular-btm-0.2.0-demo.html">Monitoring a Vert.x Application using Hawkular BTM 0.2.0.Final</a></li>
          <li>02 July 2015 - <a href="blog/2015/07/02/hawkular-1.0.0.Alpha2-released.html">Hawkular, the second release!</a></li>
          <li>01 July 2015 - <a href="blog/2015/07/01/hawkular-btm-0-1-0-released.html">Hawkular-BTM 0.1.0 released</a></li>
          <li>01 July 2015 - <a href="blog/2015/07/01/hawkular-btm-0.1.0-demo.html">Monitoring a SwitchYard Application using Hawkular BTM 0.1.0.Final</a></li>
          <li>22 June 2015 - <a href="blog/2015/06/23/hawkular-metrics-0-4-0-released.html">Hawkular-Metrics 0.4.0 release and the way beyond</a></li>
          <li>17 June 2015 - <a href="blog/2015/06/17/marsjug-and-rivieradev-retrospective.html">MarsJUG and RivieraDEV retrospective</a></li>
          <li>04 June 2015 - <a href="blog/2015/06/04/hawkular-1.0.0.Alpha1-released.html">Hawkular, the first release!</a></li>
          <li>01 June 2015 - <a href="blog/2015/06/01/hawkular-metrics-0-3-4-released.html">Hawkular-Metrics 0.3.4 release and the way beyond</a></li>
          <li>30 April 2015 - <a href="blog/2015/04/30/introducing-btm.html">Introducing the latest Hawkular component: Business Transaction Management</a></li>
          <li>29 April 2015 - <a href="blog/2015/04/29/hello-to-gsoc-students.html">Hello GSoC Students</a></li>
          <li>17 April 2015 - <a href="blog/2015/04/14/intro-to-hawkular.html">Intro to Hawkular, a middleware open-source management solution</a></li>
          <li>14 April 2015 - <a href="blog/2015/04/14/hawkular-monitor-agent-intro.html">Hawkular-Monitor Agent</a></li>
          <li>09 April 2015 - <a href="blog/2015/04/09/alert-notifiers-for-mobile-devices.html">Alert notifiers for mobile devices</a></li>
          <li>08 April 2015 - <a href="blog/2015/2015-04-08-1.html">Testing collectd integration</a></li>
          <li>07 April 2015 - <a href="blog/2015/2015-04-07-1.html">Hawkular-Metrics 0.3.1 release</a></li>
          <li>01 April 2015 - <a href="blog/2015/2015-04-01-1.html">Hawkular Discontinued</a></li>
          <li>30 March 2015 - <a href="blog/2015/2015-03-30-1.html">Dockerized Hawkular builds available</a></li>
          <li>24 February 2015 - <a href="blog/2015/2015-02-24-1.html">The Kettle starts boiling</a></li>
          <li>16 February 2015 - <a href="blog/2015/2015-02-16-1.html">Hawkular-Metrics 0.2.7 release</a></li>
        <br/><br/>
    </div>

    <a href=feed.xml><i class="fa fa-rss"></i> RSS Feed</a>
</div>


		</div>
		<div id="push"></div>
    </div>

    <section class="redhat clearfix">
      <div class="container">
        <p class="pull-left">
          <a href="http://www.redhat.com/">
            <img alt="redhatlogo-white" src="/img/redhatlogo-white.png" width="130">
          </a>
        </p>
        <p class="muted credit pull-right">&copy; 2015 | Hawkular is released under <a href="/license.html">Apache License v2.0</a></p>
    <p id="forkongithubp"><span id="forkongithub">
      <a href="https://github.com/hawkular" class="bg-grey">
        Fork me on GitHub
      </a>
    </span></p>
      </div>
    </section>

    <!-- javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- js -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="js/jbossorg-tabzilla.js"></script>
    <script src="js/behavior.js"></script>
    <script src="js/prettify.js"></script>
    <script src="js//ekko-lightbox.min.js"></script>

<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'hawkular';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-61728352-1', 'auto');
  ga('send', 'pageview');
</script>

  </body>
</html>
