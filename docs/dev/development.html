<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>Hawkular - How to develop on Hawkular</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <meta name="keywords" content="">
    <meta name="generator" content="JBake">

    <!-- css -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
    <link href="../../css/bootstrap.min.css" rel="stylesheet">
    <link href="../../css/asciidoctor.css" rel="stylesheet">
    <link href="../../css/base.css" rel="stylesheet">
    <link href="../../css/tabzilla.css" rel="stylesheet">
    <link href="../../css/styles.css" rel="stylesheet">
    <link href="../../css/prettify.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!--<link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">-->
    <link rel="shortcut icon" href="../../favicon.ico">
  </head>
  <body onload="prettyPrint()" data-spy="scroll" data-offset="80" data-target="#toc">
    <div id="wrap">
      <div class="dropup">
        <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
        <script>
            window.addEventListener('load', function() {
                 renderTabzilla("Hawkular", "https://hawkular.github.io", true );
            }, false);
        </script>
      </div>

	<!-- Fixed navbar -->
    <nav class="navbar navbar-fixed-top" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button class="navbar-toggle collapsed" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="../../index.html">Home</a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <li><a href="../../index.html">Hawkular</a></li>
            <li>
              <a href="../../docs/user/getting-started.html">Getting
                  Started</a>
            </li>
            <li class=""><a href="../../downloads.html">Downloads</a></li>
            <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
              Documentation
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a href="../../docs/user/getting-started.html">User Documentation</a>
              </li>
              <li>
                <a href="../../docs/dev/development.html">Developer Documentation</a>
              </li>
            </ul>
            <li class="dropdown"><a aria-expanded="false" class="dropdown-toggle" data-toggle="dropdown" href="#" role="button">
              Community
              <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
              <li>
                <a href="../../community/index.html">Home</a>
              </li>
              <li>
                <a href="../../community/join.html">Join</a>
              </li>
              <li>
                <a href="../../license.html">License</a>
              </li>
              <li>
                <a href="https://travis-ci.org/hawkular/hawkular/builds">CI Builds</a>
              </li>
            </ul></li>
            <li class=""><a href="../../blog.html">Blog</a></li>
          </ul>
        </div>
      </div>
    </nav>

      <section class="main-banner">
        <div class="container">
          <h1>How to develop on Hawkular</h1>
          <p>Hacking on Hawkular</p>
        </div>
      </section>

	<!--<p><em>26 February 2015</em></p>-->

	<section>
      <div class="container">
        <div id="preamble">
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title"></div>
<ul class="sectlevel1">
<li><a href="#_developing_hawkular">Developing Hawkular</a></li>
<li><a href="#_components">Components</a></li>
<li><a href="#_building">Building</a>
<ul class="sectlevel2">
<li><a href="#_full_distribution">Full distribution</a></li>
</ul>
</li>
<li><a href="#_hack_the_code">Hack the code</a></li>
<li><a href="#_submitting_pull_requests">Submitting Pull-Requests</a></li>
<li><a href="#_reviewing_merging_pull_requests">Reviewing/merging Pull-Requests</a></li>
<li><a href="#_code_style">Code Style</a></li>
<li><a href="#_documentation">Documentation</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_developing_hawkular">Developing Hawkular</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Hawkular is a set of projects and sub-projects developed together and than assembled in the Hawkular integration
project.</p>
</div>
<div class="paragraph">
<p>The biggest part of the Hawkular server code is written in Java 8.
Project assembly is run via Apache Maven.</p>
</div>
<div class="paragraph">
<p>The UI code consists mostly of AngularJS directives written in Typescript and then translated into JavaScript.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_components">Components</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">GitHub</th>
<th class="tableblock halign-left valign-top">Bug tracking</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hawkular</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hawkular/hawkular" class="bare">https://github.com/hawkular/hawkular</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/HAWKULAR" class="bare">https://issues.jboss.org/browse/HAWKULAR</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The “glue” use all
components to build the hawkular solution, this is the project that users would build and run, it consumes all the components.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hawkular-Alerts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hawkular/hawkular-alerts" class="bare">https://github.com/hawkular/hawkular-alerts</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/HWKALERTS" class="bare">https://issues.jboss.org/browse/HWKALERTS</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model and services to model and define alerts. It also runs the engine to tell when an alert needs to be triggered.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hawkular-Metrics</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hawkular/hawkular-metrics" class="bare">https://github.com/hawkular/hawkular-metrics</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/HWKMETRICS" class="bare">https://issues.jboss.org/browse/HWKMETRICS</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model and service for metrics and availability storage.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hawkular-Bus</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hawkular/hawkular-bus" class="bare">https://github.com/hawkular/hawkular-bus</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/HWKBUS" class="bare">https://issues.jboss.org/browse/HWKBUS</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Communication back bone</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hawkular-Inventory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hawkular/hawkular-inventory" class="bare">https://github.com/hawkular/hawkular-inventory</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/HWKINVENT" class="bare">https://issues.jboss.org/browse/HWKINVENT</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In charge of modeling the various components to monitor and their relationships.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hawkular-Build-Tools</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hawkular/hawkular-build-tools" class="bare">https://github.com/hawkular/hawkular-build-tools</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/HAWKULAR" class="bare">https://issues.jboss.org/browse/HAWKULAR</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Various tools to help for the build, contains checkstyle definitions for instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hawkular-Accounts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/hawkular/hawkular-accounts" class="bare">https://github.com/hawkular/hawkular-accounts</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://issues.jboss.org/browse/HAWKULAR" class="bare">https://issues.jboss.org/browse/HAWKULAR</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authorization framework for Hawkular components.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_building">Building</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Each hawkular component should be buildable on its own, but may have dependencies on other components.
We regularly publish snapshots into the JBoss Nexus snapshot repository.</p>
</div>
<div class="sect2">
<h3 id="_full_distribution">Full distribution</h3>
<div class="paragraph">
<p>To build the full distribution, you need to check out the main hawkular repo</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">git clone https://github.com/hawkular/hawkular.git
cd hawkular
mvn install -Pdev -Dlicense.skip
cd kettle/target
cd wildfly-8.2.0.Final
bin/standalone.sh</code></pre>
</div>
</div>
<div class="paragraph">
<p>When the server is running you can hit the UI at <a href="http://localhost:8080/" class="bare">http://localhost:8080/</a></p>
</div>
<div class="paragraph">
<p>When you build the Kettle, all sub-components are deployed to
<code>modules/system/layers/base/org/hawkular/nest/main/deployments/</code> inside the WildFly server.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you want to hot-deploy your component during development, you need to enable the deployment scanner. You can do this
via the JBoss CLI by running this command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">bin/jboss-cli.sh --connect --command='/subsystem=deployment-scanner/scanner=default/:write-attribute(name=scan-enabled,value=true)'</code></pre>
</div>
</div>
<hr>
<div class="paragraph">
<p>You can set this manually by editing <code>standalone/configuration/standalone.xml</code> and setting <code>&lt;deployment-scanner scan-enabled="true" &#8230;&#8203;</code>.
Once the scanner is enabled, you need to remove the respective component from the above modules directory. Now you can copy your component&#8217;s deployment into the scanner&#8217;s deployment directory at <code>standalone/deployments/</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you want to attach a remote debugger, you can start the server with <code>--debug</code> option like this:
<code>bin/standalone.sh --debug</code>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hack_the_code">Hack the code</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When you decide you want to start coding on Hawkular and/or one of the sub-projects mentioned above, please visit the
 <a href="https://github.com/hawkular/hawkular-build-tools/tree/master/ide-configs">ide-configs</a> section of the
 build-tools repository and download the respective settings file for your IDE. This settings file will help you
 applying the coding standards that are checked on <code>mvn install</code> runs.</p>
</div>
<div class="paragraph">
<p>To work on the code, it is best to fork the Hawkular repository and then work there on your changes.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Try to work in branches even inside your own repository, as this will make syncing with upstream
 much easier.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once you have made a change ready to go, go to the respective GitHub repository and open a pull-request (see below).</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
make sure to run a full <code>mvn clean install</code> run on your code changes without any other options and fix
any errors that appear.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you work with Snapshot dependencies of other projects, it can be helpful to force check for updates with
maven option <code>-U</code>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_submitting_pull_requests">Submitting Pull-Requests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>GitHub has the beautiful feature of Pull-Requests (PR). Once you are done with coding, commit and push the change to a
a new branch in your private fork. Then go to the fork on GitHub and your branch and open a Pull-Request. Please
describe your change before submitting.
GitHub has <a href="https://help.github.com/articles/using-pull-requests/">documentation on pull-requests</a></p>
</div>
<div class="paragraph">
<p>When the Pull-Request has been submitted, expect some reviews, questions and suggestions. If this leads to
updated code, just push the additional commits to the branch you used to open the Pull-Request.</p>
</div>
<div class="paragraph">
<p>After the Pull-Request got merged into your branch you can delete it on GitHub with the "Delete branch button" on the
PR itself. To also remove it from the local repo, you can run <code>git fetch --prune</code> like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code class="language-shell" data-lang="shell">snert:kettle hrupp$ git fetch --prune
From https://github.com/hawkular/hawkular
 x [deleted]         (none)     -&gt; origin/pinger-update</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reviewing_merging_pull_requests">Reviewing/merging Pull-Requests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before merging a Pull-Request, make sure that it builds when merged. The Hawkular repositories have been set up to
run continuous integration (CI) on Pull-Requests.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/dev-docs/pr-detail.png" alt="Detail of a pull-request">
</div>
</div>
<div class="paragraph">
<p>In above detail view of a pull-request, you can see that the first commit (e44f90a) failed CI by the red cross next
to the commit id. The commit after it then passed as you can see by the green check mark. Those markers are
shown for commits on the <em>Conversation</em> and <em>Commits</em> tab in the GitHub UI.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Only merge Pull-Requests that have successfully passed CI
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <em>Files Changed</em> tab allow to review the commits as difference to the reference branch (usually master). It is
possible to comment on individual lines by hovering the mouse cursor on the line separator between lne numbers and
code until a little white plus on blue appears. Click on it and add your comment.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/img/dev-docs/pr-detail2.png" alt="Add a line comment">
</div>
</div>
<div class="paragraph">
<p>If you have opened a comment, allow the submitter (and others) to reply and potentially update the code.</p>
</div>
<div class="paragraph">
<p>After everything looks good, press the big green merge button :-)</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_code_style">Code Style</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As already mentioned above, there are some coding conventions enforced by checkstyle. Please follow them. Using one of
the IDE setup files will help you. Other than that there are other conventions we should follow</p>
</div>
<div class="ulist">
<ul>
<li>
<p>DO not throw <code>NullPointerException</code> when method arguments are <code>null</code>. Throw <code>IllegalArgumentException</code> instead.</p>
</li>
<li>
<p>Always use the loggers from <code>org.jboss.logging</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_documentation">Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Documentation such as these pages, but also all the README files are written in AsciiDoc and use a file suffix of
<code>.adoc</code>.</p>
</div>
<div class="paragraph">
<p>Jax-RS Rest-Interfaces are to be commented / annotated via Swagger Annotations, that allow for automatic creation of
API documentation from the annotations and the Java elements they are applied to.</p>
</div>
</div>
</div>
      </div>
    </section>

		</div>
		<div id="push"></div>
    </div>
    
    <div id="footer">
      <div class="container">
        
      </div>
    </div>

    <section class="redhat">
      <div class="container">
        <p class="text-center">
          <a href="http://www.redhat.com/">
            <img alt="redhatlogo-white" src="../..//img/redhatlogo-white.png" width="130">
          </a>
        </p>
        <p class="muted credit">&copy; 2015 | Baked with <a href="http://jbake.org">JBake v2.3.2</a></p>
    <p id="forkongithubp"><span id="forkongithub">
      <a href="https://github.com/hawkular" class="bg-grey">
        Fork me on GitHub
      </a>
    </span></p>
      </div>
    </section>
    
    <!-- javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <!-- js -->
    <script src="../../js/jquery-1.11.2.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="../../js/jbossorg-tabzilla.js"></script>
    <script src="../../js/behavior.js"></script>
    <script src="../../js/prettify.js"></script>
    
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-xxxyyyxy-z']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

  </body>
</html>
